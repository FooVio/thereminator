{"version":3,"sources":["webpack:///webpack/bootstrap a1c4c68c167c435af020","webpack:///./src/clients/master.js","webpack:///./src/lib/sound.js","webpack:///./src/lib/video.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;AC3BA;AACA;AACA,cAAa;AACb,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;;;;;AC9DD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4BAA2B;AAC3B,+BAA8B;;;AAG9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,sBAAqB,cAAc;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,EAAC","file":"master.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a1c4c68c167c435af020\n **/","var sound = require('../lib/sound.js');\nvar video = require('../lib/video.js');\n\nfunction setup() {\n  // SOUND\n  sound.init();\n  sound.mute();\n\n  var socket = io();\n  socket.on('server-message', sound.process);\n\n  // VIDEO\n  video.init();\n}\n\nfunction draw() {\n  video.draw();\n}\n\n\nfunction windowResized() {\n  resizeCanvas(windowWidth, windowHeight);\n  background(0);\n}\n\nwindow.setup = setup;\nwindow.draw = draw;\nwindow.windowResized = windowResized;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/clients/master.js\n ** module id = 0\n ** module chunks = 2\n **/","(function() {\n  var instruments = {\n    drums: {},\n    bass: {},\n    synth: {}\n  }\n\n  function init() {\n    Gibber.init() // REQUIRED!\n    Gibber.scale.root.seq( ['c4','eb4'], 2)\n\n    instruments['drums'] = EDrums('xoxo')\n    instruments['drums'].snare.snappy = 1\n\n    instruments['bass'] = Mono('bass').note.seq( [0,7], 1/8 )\n\n    instruments['synth'] = Mono('easyfx')\n      .note.seq( Rndi(0,12), [1/4,1/8,1/2,1,2].rnd( 1/8,4 ) )\n  }\n\n  function mute() {\n    amp('drums',1);\n    drumamp('kick',0);\n    drumamp('snare',0);\n    amp('bass',0);\n    amp('synth',0);\n  }\n\n  function amp(name, volume) {\n    instruments[name].amp = volume;\n  }\n\n  function drumamp(drumname, volume) {\n    instruments['drums'][drumname].amp = volume;\n  }\n\n  function process(messages) {\n    console.log(JSON.stringify(messages));\n    messages.forEach(function(message) {\n      console.log(JSON.stringify(message));\n      var instrument = message.instrument;\n      switch (message.parameter) {\n        case 'amp':\n          if (instrument.match(/drums\\//)) {\n            drumamp(instrument.match(/drums\\/(.+)/)[1], message.value);\n          } else {\n            amp(instrument, message.value);\n          }\n          break;\n        default:\n          amp(instrument, message.value);\n          break;\n      }\n    });\n  }\n\n  module.exports = {\n    init: init,\n    mute: mute,\n    process: process\n  };\n\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/sound.js\n ** module id = 4\n ** module chunks = 2\n **/","(function() {\n  var amplitude;\n\n  var backgroundColor;\n\n  // rectangle parameters\n  var rectRotate = true;\n  var rectMin = 15;\n  var rectOffset = 20;\n  var numRects = 10;\n\n  // :: Beat Detect Variables\n  // how many draw loop frames before the beatCutoff starts to decay\n  // so that another beat can be triggered.\n  // frameRate() is usually around 60 frames per second,\n  // so 20 fps = 3 beats per second, meaning if the song is over 180 BPM,\n  // we wont respond to every beat.\n  var beatHoldFrames = 2;\n\n  // what amplitude level can trigger a beat?\n  var beatThreshold = 0.01;\n\n  // When we have a beat, beatCutoff will be reset to 1.1*beatThreshold, and then decay\n  // Level must be greater than beatThreshold and beatCutoff before the next beat can trigger.\n  var beatCutoff = 0;\n  var beatDecayRate = 0.98; // how fast does beat cutoff decay?\n  var framesSinceLastBeat = 0; // once this equals beatHoldFrames, beatCutoff starts to decay.\n\n\n  function init() {\n    backgroundColor = color( random(0,255), random(0,255), random(0,255) );\n    c = createCanvas(windowWidth, windowHeight);\n    noStroke();\n    rectMode(CENTER);\n\n    var audioSignal = new p5.AudioIn()\n    audioSignal.connect();\n    audioSignal.start();\n\n    amplitude = new p5.Amplitude();\n    amplitude.setInput(audioSignal);\n\n    amplitude.smooth(0.9);\n  }\n\n  function detectBeat(level) {\n    if (level  > beatCutoff && level > beatThreshold){\n      onBeat();\n      beatCutoff = level *1.2;\n      framesSinceLastBeat = 0;\n    } else{\n      if (framesSinceLastBeat <= beatHoldFrames){\n        framesSinceLastBeat ++;\n      }\n      else{\n        beatCutoff *= beatDecayRate;\n        beatCutoff = Math.max(beatCutoff, beatThreshold);\n      }\n    }\n  }\n\n  function onBeat() {\n    backgroundColor = color( random(0,255), random(0,255), random(0,255) );\n    rectRotate = !rectRotate;\n  }\n\n  function draw() {\n    background(backgroundColor);\n\n    var level = amplitude.getLevel();\n    detectBeat(level);\n\n    // distort the rectangle based based on the amp\n    var distortDiam = map(level, 0, 1, 0, 1200);\n    var w = rectMin;\n    var h = rectMin;\n\n    // distortion direction shifts each beat\n    if (rectRotate) {\n      var rotation = PI/ 2;\n    } else {\n      var rotation = PI/ 3;\n    }\n\n    // rotate the drawing coordinates to rectCenter position\n    var rectCenter = createVector(width/3, height/2);\n\n    push();\n\n      // draw the rectangles\n      for (var i = 0; i < numRects; i++) {\n        var x = rectCenter.x + rectOffset * i;\n        var y = rectCenter.y + distortDiam/2;\n        // rotate around the center of this rectangle\n        translate(x, y);\n        rotate(rotation);\n        rect(0, 0, rectMin, rectMin + distortDiam);\n      }\n    pop();\n  }\n\n  module.exports = {\n    init: init,\n    draw: draw\n  };\n\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/video.js\n ** module id = 5\n ** module chunks = 2\n **/"],"sourceRoot":""}